<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MoodTasker ‚Äî Randomiser</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-1: #0f1724;
      --bg-2: #071023;
      --accent-start: #FF6B35;
      --accent-end: #6DFFB0;
      --muted: rgba(230,239,248,0.65);
      --card: rgba(255,255,255,0.03);
      --glass-border: rgba(255,255,255,0.06);
      --shadow: 0 12px 40px rgba(2,6,23,0.6);
      --control-bg: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      --select-text: #071023;
      --cta-bg: linear-gradient(90deg, rgba(255,107,53,1), rgba(109,255,176,1));
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(109,255,176,0.06), transparent 8%),
        radial-gradient(800px 400px at 90% 90%, rgba(255,107,53,0.04), transparent 6%),
        linear-gradient(180deg,var(--bg-1),var(--bg-2));
      color:#e6eef8;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px;
    }

    .card{
      width:100%;
      max-width:760px;
      background:var(--control-bg);
      border:1px solid var(--glass-border);
      border-radius:14px;
      padding:20px;
      box-shadow:var(--shadow);
      backdrop-filter:blur(8px) saturate(120%);
      display:grid;
      grid-template-columns: 1fr;
      gap:18px;
      position:relative;
      overflow:hidden;
    }

    .glow {
      position:absolute;right:-120px;top:-40px;width:380px;height:380px;border-radius:50%;
      background: radial-gradient(circle at 30% 30%, rgba(109,255,176,0.12), transparent 20%),
                  radial-gradient(circle at 70% 70%, rgba(255,107,53,0.08), transparent 20%);
      filter: blur(40px);pointer-events:none;
    }

    header{display:flex;align-items:center;gap:12px}
    .logo {
      width:44px;height:44px;border-radius:10px;
      background: linear-gradient(135deg,var(--accent-start),var(--accent-end));
      display:flex;align-items:center;justify-content:center;font-weight:800;color:#071023;
      box-shadow:0 6px 18px rgba(0,0,0,0.35);
    }
    h1{font-size:18px;margin:0}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .controls{
      display:flex;gap:12px;align-items:center;
      flex-wrap:wrap;
    }

    label{font-size:12px;color:var(--muted);margin-bottom:6px;display:block}

    select{
      -webkit-appearance:none;appearance:none;
      border-radius:10px;padding:12px 14px;border:1px solid var(--glass-border);
      background:#fff; color:var(--select-text); font-size:15px; min-width:200px;
      outline:none;
    }

    .get-btn{
      padding:12px 16px;border-radius:10px;border:none;
      background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      color:var(--muted);font-weight:700;cursor:pointer;
      display:inline-flex;align-items:center;gap:10px;
      transition:transform .12s ease, box-shadow .12s ease, background .12s ease;
      box-shadow: 0 6px 18px rgba(2,6,23,0.4);
    }
    .get-btn .dot {
      width:12px;height:12px;border-radius:50%;
      background: linear-gradient(90deg,var(--accent-start),var(--accent-end));
      box-shadow:0 6px 16px rgba(109,255,176,0.12);
    }
    .get-btn:hover{transform:translateY(-2px); background: var(--cta-bg); color:#071023}
    .get-btn:active{transform:translateY(1px)}

    .secondary { padding:10px 12px;border-radius:8px;border:1px solid var(--glass-border);background:transparent;color:var(--muted);cursor:pointer;font-weight:700 }

    .result {
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.04);
      display:flex;flex-direction:column;gap:8px;align-items:flex-start;
      min-height:110px;
    }
    .task-text { font-size:20px;font-weight:800;color:#f6fcff;line-height:1.25; }
    .task-meta { font-size:13px;color:var(--muted);display:flex;gap:12px;align-items:center }

    .history { display:flex;gap:8px;flex-wrap:wrap; align-items:center }
    .chip { background:var(--card); padding:8px 10px;border-radius:999px;font-size:13px;color:var(--muted); border:1px solid rgba(255,255,255,0.02); max-width:220px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }

    footer{display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-size:13px}
    @media (max-width:640px){
      .controls{flex-direction:column;align-items:stretch}
      select{width:100%}
      .get-btn{width:100%;justify-content:center}
    }
  </style>
</head>
<body>
  <main class="card" role="main" aria-label="MoodTasker Randomiser">
    <div class="glow" aria-hidden="true"></div>

    <header>
      <div class="logo" aria-hidden="true">MT</div>
      <div>
        <h1>MoodTasker</h1>
        <p class="lead">Choose a mood. Reveal task.</p>
      </div>
    </header>

    <div class="controls" role="region" aria-label="Controls">
      <div style="min-width:220px">
        <label for="moodSelect">Mood</label>
        <select id="moodSelect" aria-label="Select mood">
          <option value="">‚Äî Choose mood ‚Äî</option>
          <option value="Happy">üòä Happy</option>
          <option value="Sad">üò¢ Sad</option>
          <option value="Tired">üò¥ Tired</option>
          <option value="Bored">üòê Bored</option>
          <option value="Lazy">üõãÔ∏è Lazy</option>
          <option value="Stressed">üòñ Stressed</option>
          <option value="Excited">ü§© Excited</option>
          <option value="Lonely">üßç Lonely</option>
        </select>
      </div>

      <div style="display:flex;gap:8px;align-items:center">
        <button id="getBtn" class="get-btn" aria-controls="taskArea" title="Reveal task">
          <span class="dot" aria-hidden="true"></span>
          <span>Reveal task</span>
        </button>
        <button id="regenerateBtn" class="secondary" title="Regenerate task">Regenerate</button>
      </div>
    </div>

    <section class="result" id="taskArea" role="region" aria-live="polite" aria-label="Task result">
      <div class="task-text" id="taskText">Choose a mood and tap Reveal task to get a playable task.</div>
      <div class="task-meta"><span id="taskIntensity">Intensity ‚Ä¢ ‚Äî</span><span>¬∑</span><span id="taskTags">Tags ‚Ä¢ ‚Äî</span></div>
    </section>

    <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
      <div class="history" id="history" aria-label="Recent tasks" title="Recent tasks (compact)">
        <!-- compact chips will appear here -->
      </div>

      <div style="display:flex;gap:8px;align-items:center">
        <button id="copyBtn" class="secondary" title="Copy task">Copy</button>
      </div>
    </div>

    <footer>
      <div>Release ¬∑ MoodTasker</div>
      <div style="opacity:0.9">Keyboard: Enter = Reveal ¬∑ Space = Regenerate ¬∑ C = Copy</div>
    </footer>
  </main>

  <script>
    const tasks = {
      Happy: [
        {id:'h1', text:"Do a 2-minute celebration dance", intensity:"light", tags:["movement"]},
        {id:'h2', text:"Write a short thank-you note", intensity:"light", tags:["social"]},
        {id:'h3', text:"Make a 5-song playlist that makes you smile", intensity:"light", tags:["music"]}
      ],
      Sad: [
        {id:'s1', text:"Watch a short uplifting clip", intensity:"light", tags:["media"]},
        {id:'s2', text:"Call one supportive person", intensity:"medium", tags:["social"]},
        {id:'s3', text:"Journal three things you feel", intensity:"medium", tags:["reflection"]}
      ],
      Tired: [
        {id:'t1', text:"Drink a full glass of water", intensity:"light", tags:["physical"]},
        {id:'t2', text:"Stand and stretch for 2 minutes", intensity:"light", tags:["movement"]},
        {id:'t3', text:"Do a 5-minute power nap or rest with timer", intensity:"medium", tags:["rest"]}
      ],
      Bored: [
        {id:'b1', text:"Try a 10-minute art experiment", intensity:"medium", tags:["creative"]},
        {id:'b2', text:"Learn a tiny new skill (5-min)", intensity:"light", tags:["learning"]},
        {id:'b3', text:"Solve a quick brain teaser", intensity:"light", tags:["focus"]}
      ],
      Lazy: [
        {id:'l1', text:"Order a simple nourishing takeaway", intensity:"light", tags:["comfort"]},
        {id:'l2', text:"Watch a feel-good short film", intensity:"light", tags:["media"]},
        {id:'l3', text:"Tidy one small surface for 3 minutes", intensity:"light", tags:["environment"]}
      ],
      Stressed: [
        {id:'st1', text:"Do 4-4-8 breathing for 2 minutes", intensity:"light", tags:["breath"]},
        {id:'st2', text:"Brain-dump everything onto paper", intensity:"medium", tags:["productivity"]},
        {id:'st3', text:"Take a 10-minute walk without phone", intensity:"medium", tags:["movement"]}
      ],
      Excited: [
        {id:'e1', text:"Sketch the outline of a new project (10 min)", intensity:"medium", tags:["creative"]},
        {id:'e2', text:"Make a 30-second video pitch of your idea", intensity:"light", tags:["media"]},
        {id:'e3', text:"Break a big idea into three actionable tasks", intensity:"medium", tags:["planning"]}
      ],
      Lonely: [
        {id:'ln1', text:"Set up a video call with a friend", intensity:"medium", tags:["social"]},
        {id:'ln2', text:"Join an online group that interests you", intensity:"light", tags:["social"]},
        {id:'ln3', text:"Invite someone for a nature walk", intensity:"light", tags:["social"]}
      ]
    };

    let lastMood = null;
    let lastTask = null;
    let history = JSON.parse(localStorage.getItem('mt_history_compact') || '[]');

    const moodSelect = document.getElementById('moodSelect');
    const getBtn = document.getElementById('getBtn');
    const regenerateBtn = document.getElementById('regenerateBtn');
    const taskText = document.getElementById('taskText');
    const taskIntensity = document.getElementById('taskIntensity');
    const taskTags = document.getElementById('taskTags');
    const historyEl = document.getElementById('history');
    const copyBtn = document.getElementById('copyBtn');

    function renderHistory(){
      historyEl.innerHTML = '';
      history.slice(0,6).forEach(h => {
        const chip = document.createElement('div');
        chip.className = 'chip';
        chip.textContent = h;
        historyEl.appendChild(chip);
      });
    }
    renderHistory();

    function showTask(task){
      lastTask = task;
      taskText.textContent = task.text;
      taskIntensity.textContent = 'Intensity ‚Ä¢ ' + (task.intensity || '‚Äî');
      taskTags.textContent = 'Tags ‚Ä¢ ' + ((task.tags && task.tags.join(', ')) || '‚Äî');
      history.unshift(task.text);
      if(history.length > 12) history = history.slice(0,12);
      localStorage.setItem('mt_history_compact', JSON.stringify(history));
      renderHistory();
    }

    function getTask(){
      const mood = moodSelect.value;
      if(!mood || !tasks[mood]) {
        taskText.textContent = 'Please choose a mood.';
        taskIntensity.textContent = 'Intensity ‚Ä¢ ‚Äî';
        taskTags.textContent = 'Tags ‚Ä¢ ‚Äî';
        return;
      }
      lastMood = mood;
      const list = tasks[mood];
      const chosen = list[Math.floor(Math.random()*list.length)];
      showTask(chosen);
      getBtn.blur();
    }

    function regenerate(){
      if(!lastMood) return getTask();
      const list = tasks[lastMood];
      if(!list || list.length === 0) return;
      let chosen;
      if(list.length === 1) chosen = list[0];
      else {
        do { chosen = list[Math.floor(Math.random()*list.length)]; }
        while(lastTask && chosen.id === lastTask.id);
      }
      showTask(chosen);
    }

    async function copyTask(){
      const text = taskText.textContent || '';
      if(!text) return;
      try {
        await navigator.clipboard.writeText(text);
        flash('Copied');
      } catch {
        flash('Copy failed');
      }
    }

    function flash(msg){
      const chip = document.createElement('div');
      chip.className = 'chip';
      chip.textContent = msg;
      historyEl.prepend(chip);
      setTimeout(()=>{ if(historyEl.contains(chip)) historyEl.removeChild(chip) }, 1000);
    }

    document.addEventListener('keydown', (e)=>{
      const active = document.activeElement?.tagName?.toLowerCase();
      if(active === 'select' || active === 'input' || active === 'textarea') {
        if(e.key === 'Enter' && document.activeElement === moodSelect) { e.preventDefault(); getTask(); }
        return;
      }
      if(e.key === ' '){ e.preventDefault(); regenerate(); }
      if(e.key === 'Enter'){ getTask(); }
      if(e.key.toLowerCase() === 'c'){ copyTask(); }
    });

    getBtn.addEventListener('click', getTask);
    regenerateBtn.addEventListener('click', regenerate);
    copyBtn.addEventListener('click', copyTask);

    moodSelect.focus();
  </script>
</body>
</html>
